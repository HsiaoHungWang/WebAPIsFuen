
@{
    ViewData["Title"] = "FileAPI";
}

<h1>FileAPI</h1>
<div class="zone">
    <input id="file1" type="file" multiple />
</div>
@section Scripts {
    <script>
        const zone = document.querySelector('.zone');
        const myFile = document.querySelector('#file1')
       
        function fileInfo(theFile) {
            //theFile -> File物件
            //透過 console.log()，顯示檔案名稱、類型、大小及最後修改日期
            console.log(theFile.name); //檔案名稱
            console.log(theFile.type); //類型
            console.log(theFile.size); //大小
            console.log(formatLastModified(theFile.lastModified)); //最後修改日期
            console.log(theFile.lastModifiedDate); //最後修改日期
        }

        myFile.addEventListener('change', event => fileInfo(event.target.files[0]));

        zone.addEventListener('dragover', event => event.preventDefault());
        zone.addEventListener('drop', event => {
            event.preventDefault();
            fileInfo(event.dataTransfer.files[0]);
        })
       
        //傳入毫秒，轉成 yyyy/mm/dd hh:mm:ss 回傳
        function formatLastModified(lastModified) {
            const date = new Date(lastModified);

            const year = date.getFullYear();
            const month = (date.getMonth() + 1).toString().padStart(2, '0'); // 月份從0開始，需要加1，並補零
            const day = date.getDate().toString().padStart(2, '0'); // 補零
            const hours = date.getHours().toString().padStart(2, '0'); // 補零
            const minutes = date.getMinutes().toString().padStart(2, '0'); // 補零
            const seconds = date.getSeconds().toString().padStart(2, '0'); // 補零

            return `${year}/${month}/${day} ${hours}:${minutes}:${seconds}`;
        }

    </script>
}

@section Styles{
    <style>
        .zone {
            width: 100%;
            height: 200px;
            border: 1px solid green;
        }
    </style>
}